<nav class="navbar">
    <div class="nav-container">
        <div class="nav-logo">
            <a href="{{ url_for('index') }}">BeatStore</a>
        </div>
        <div class="nav-search">
            <form action="{{ url_for('search') }}" method="GET">
                <input type="text" name="q" placeholder="Search beats..." value="{{ request.args.get('q', '') }}">
                <button type="submit"><i class="fas fa-search"></i></button>
            </form>
        </div>
        <div class="nav-links">
    <a href="{{ url_for('marketplace') }}" class="nav-link">
        <i class="fas fa-store"></i>Marketplace
    </a>
    {% if current_user.is_authenticated %}
        <a href="{{ url_for('upload') }}" class="nav-link">
            <i class="fas fa-upload"></i>Upload
        </a>
        <a href="{{ url_for('profile') }}" class="nav-link">
            <i class="fas fa-user"></i>Profile
        </a>
        <a href="{{ url_for('logout') }}" class="nav-link">
            <i class="fas fa-sign-out-alt"></i>Logout
        </a>
    {% else %}
        <a href="{{ url_for('login') }}" class="nav-link">
            <i class="fas fa-sign-in-alt"></i>Login
        </a>
        <a href="{{ url_for('register') }}" class="nav-link">
            <i class="fas fa-user-plus"></i>Register
        </a>
    {% endif %}
</div>
    </div>
</nav>

{% with messages = get_flashed_messages() %}
    {% if messages %}
        <div class="flash-messages">
            {% for message in messages %}
                <div class="flash-message">{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}
{% endwith %}